<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>RL-Dice Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>RL Dice</h1>




<h2>Topics</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><strong>readme</strong></li>
</ul>
<h2>Classes</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../index.html">dice</a></li>
</ul>
<h2>Examples</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../examples/advanced_uses.lua.html">advanced_uses.lua</a></li>
  <li><a href="../examples/basic_dice.lua.html">basic_dice.lua</a></li>
  <li><a href="../examples/boundry_behaviour.lua.html">boundry_behaviour.lua</a></li>
  <li><a href="../examples/metamethods.lua.html">metamethods.lua</a></li>
  <li><a href="../examples/minimum.lua.html">minimum.lua</a></li>
  <li><a href="../examples/valid_dice_notation.lua.html">valid_dice_notation.lua</a></li>
  <li><a href="../examples/weapon_samples.lua.html">weapon_samples.lua</a></li>
</ul>

</div>

<div id="content">


<h1>RL-Dice</h1>

<p>A module to be used with conventional Roguelike dice.</p>

<h2>Dice Index</h2>

<p>({x}d{y}+{s}{z}^+{s}{r})x{v}</p>

<p>x - Number of dice <br/>
y - Faces of the dice <br/>
z - Bonus value to be added to the last roll result (can be negative) <br/>
r - Rerolls, if + then remove lowest rolls, if - then remove highest rolls <br/>
s - If double sign (++ or --) adds {z} value to ALL dice rolls and/or {r} rerolls to all dice rolls <br/>
v - Sets of dice used</p>

<p>Examples:</p>

<pre>

        <span class="number">1</span>d6 = Roll <span class="number">1</span> six sided die
      <span class="number">3</span>d4 = Roll <span class="number">3</span> dice with four sides
    <span class="number">2</span>d4+<span class="number">1</span> = Roll <span class="number">2</span> dice with four sides, add +<span class="number">1</span> to last roll
   <span class="number">3</span>d3++<span class="number">1</span> = Roll <span class="number">3</span> dice with three sides, add +<span class="number">1</span> to all rolls
   <span class="number">3</span>d3<span class="comment">--1 = Roll 3 dice with three sides, add -1 to all rolls
</span>   <span class="number">2</span>d6^+<span class="number">2</span> = Roll <span class="number">4</span> dice with six sides, remove the two lowest rolls
  <span class="number">2</span>d4^++<span class="number">1</span> = Roll <span class="number">4</span> dice with four sides, remove the two lowest rolls
 <span class="number">3</span>d4-<span class="number">2</span>^-<span class="number">1</span> = Roll <span class="number">3</span> dice with four sides, remove the highest roll, add -<span class="number">1</span> to last roll
  (<span class="number">1</span>d6)x1 = Roll <span class="number">1</span> six sided die (one set)
  (<span class="number">1</span>d6)x3 = Roll <span class="number">1</span> six sided die (three sets)

  The difference between <span class="number">3</span>d6 <span class="keyword">and</span> (<span class="number">1</span>d6)x3 is {<span class="number">3</span>d3} vs {<span class="number">1</span>d6, <span class="number">1</span>d6, <span class="number">1</span>d6}
  Sets <span class="keyword">return</span> MULTIPLE results where number of dice only returns a SINGLE result <span class="keyword">or</span>...
  You could use both!

  (<span class="number">3</span>d3)x3 = Roll <span class="number">3</span> six sided die (three sets)  {<span class="number">3</span>d3, <span class="number">3</span>d3, <span class="number">3</span>d3}
</pre>

<h2>Usage</h2>

<p>First load the module:</p>


<pre>
<span class="keyword">local</span> dice = <span class="global">require</span>(<span class="string">'rl-dice/dice'</span>)
</pre>

<p>Then to use, it is really simple:</p>


<pre>
<span class="global">print</span>(dice.roll(<span class="number">8</span>))                                             <span class="comment">-- 2 (ie. math.random(1, num))
</span><span class="global">print</span>(dice.roll({sets=<span class="number">5</span>,faces=<span class="number">3</span>})                               <span class="comment">-- 3, 1, 1, 2, 3
</span><span class="global">print</span>(dice.roll(<span class="string">'3d6'</span>))                                         <span class="comment">-- 12
</span><span class="global">print</span>(dice.getString({num=<span class="number">3</span>, faces=<span class="number">6</span>}))                         <span class="comment">-- '3d6'
</span><span class="global">print</span>(dice.getDice(<span class="string">'3d6'</span>))                                      <span class="comment">-- {num=3, faces=6}
</span><span class="global">print</span>(dice.roll(Dice.getDice(dice.getString({set=<span class="number">3</span>, faces=<span class="number">6</span>}))) <span class="comment">-- 2,6,1
</span><span class="global">print</span>(dice.roll(Dice.getString(dice.getDice(<span class="string">'(1d6)x3'</span>))))       <span class="comment">-- 2,6,1
</span><span class="global">print</span>(dice.chance(.<span class="number">72</span>))                                         <span class="comment">-- true  (math.random() rolled .27)
</span><span class="global">print</span>(dice.chance(.<span class="number">13</span>))                                         <span class="comment">-- false (math.random() rolled .51)
</span>
</pre>

<p>There are also additional dice roll methods not normally seen in roguelikes, such as applying bonuses to all dice and the ability to reroll dice.</p>

<h2>Methods</h2>

<p>dice.roll(num/string/dice_tbl) or dice:roll()</p>


<pre>
returns set1, set2, set3, etc.
</pre>

<p>dice.chance(decimal)</p>


<pre>
returns decimal &gt;= <span class="global">math</span>.random()
</pre>

<p>dice.getString(dice_tbl) or dice:getString()</p>


<pre>
returns <span class="string">"formatted dice string"</span>
</pre>

<p>dice.getDice(str)</p>


<pre>
returns {formatted dice <span class="global">table</span>}
</pre>

<p>dice.setMin(minimum)</p>


<pre>
sets the lowest possible roll minimum <span class="keyword">for</span> class default (<span class="keyword">if</span> <span class="keyword">nil</span> allows negative results to be rolled)
</pre>

<h2>Dice Table</h2>


<pre>
dice = {
    num = (+)number,
    faces = (+)number,
    sets = (+)number,           <span class="comment">-- optional
</span>    bonus = (+ <span class="keyword">or</span> -)number,    <span class="comment">-- optional
</span>    double_b = binary,         <span class="comment">-- optional (requires bonus)
</span>    rerolls = (+ <span class="keyword">or</span> -)number   <span class="comment">-- optional
</span>    double_r = binary,         <span class="comment">-- optional (requires rerolls)
</span>    minimum = number/<span class="keyword">nil</span>        <span class="comment">-- optional (nil results in class default (if any) )
</span>}
</pre>

<h2>Classes &amp; Metamethods</h2>

<p>dice:new(num/string/dice_tbl, minimum) [returns roll obj]</p>


<pre>
weapon = dice:new(<span class="string">'1d6'</span>)                      <span class="comment">-- '1d6'
</span>
</pre>

<p>dice.__add [modify bonus]</p>


<pre>
weapon = weapon + <span class="number">4</span>                           <span class="comment">-- '1d6+4'
</span>
</pre>

<p>dice.__sub [modify bonus]</p>


<pre>
weapon = weapon - <span class="number">2</span>                           <span class="comment">-- '1d6+2'
</span>
</pre>

<p>dice.__mul [modify number of dice]</p>


<pre>
weapon = weapon * <span class="number">2</span>                           <span class="comment">-- '3d6+2'
</span>
</pre>

<p>dice.__div [modify dice faces]</p>


<pre>
weapon = weapon / -<span class="number">2</span>                          <span class="comment">-- '3d4+2'
</span>
</pre>

<p>dice.__pow [modify dice rerolls]</p>


<pre>
weapon = weapon ^ <span class="number">1</span>                           <span class="comment">-- '3d4+2^+1'
</span>
</pre>

<p>dice.__mod [modify dice sets]</p>


<pre>
weapon = weapon % <span class="number">2</span>                              <span class="comment">-- '(3d4+1^+1)x3'
</span>
</pre>

<p>dice.__concat [modify double sign (for bonus or rerolls)]</p>


<pre>
weapon = weapon .. <span class="string">'++^^'</span>                     <span class="comment">-- '(3d4++2^++1)x3'
</span>weapon = weapon .. <span class="string">'+^'</span>                       <span class="comment">-- '(3d4+2^+1)x3'
</span><span class="comment">-- '++' or '--' to enable double sign for bonus, '^^' to enable double sign for rerolls
</span><span class="comment">-- '+' or '-' to enable single sign for bonus, '^' to enable single sign for rerolls
</span>
</pre>

<p>dice.__tostring [returns dice str]</p>


<pre>
<span class="global">print</span>(weapon)                                 <span class="comment">-- '(3d4+2^+1)x3'
</span>
</pre>

<h2>Minimums</h2>

<p>You can set minimums for the dice result for either the entire class, a single dice instance, or nil. (nil allows negative roll results)</p>

<p>To set the class minimum:</p>


<pre>
dice.setMin(<span class="number">0</span>)                    <span class="comment">-- Dice minimum for ALL results is now 0
</span>
</pre>

<p>To set a dice instance minimum: (the second argument in dice:new(dice_str, minimum))</p>


<pre>
dice:new(<span class="string">'1d5'</span>, <span class="number">1</span>)                   <span class="comment">-- Dice minimum for ONLY this dice instance is 1
</span>
</pre>

<p>A dice instance minimum overrides a class minimum.  Therefore,</p>


<pre>
dice.setMin(<span class="number">0</span>)                                  <span class="comment">-- dice class min is 0
</span>dice_INST = dice:new(<span class="string">'1d3-10'</span>, <span class="number">1</span>)               <span class="comment">-- dice inst min is 1
</span><span class="global">print</span>(dice_INST:roll())                         <span class="comment">-- 1
</span>
dice.setMin(<span class="keyword">nil</span>)                                <span class="comment">-- dice class min is nil (can roll negative results)
</span>dice_INST = dice:new(<span class="string">'1d3-5'</span>)                   <span class="comment">-- dice inst min is nil as well
</span><span class="global">print</span>(dice_INST:roll())                         <span class="comment">-- -3
</span>
</pre>

<h2>Dice Strings</h2>

<p>The dice must follow a certain string format when creating a new dice object or it will raise an error.</p>


<pre>
dice_str = <span class="string">'1d5'</span>                     <span class="comment">-- valid
</span>dice_str = <span class="string">'3d5'</span>                     <span class="comment">-- valid
</span>dice_str = <span class="string">'(1d3)x1'</span>                 <span class="comment">-- valid
</span>dice_str = <span class="string">'1d2+1'</span>                     <span class="comment">-- valid
</span>dice_str = <span class="string">'1d10^+1'</span>                  <span class="comment">-- valid
</span>dice_str = <span class="string">'1d5+1^-2'</span>                <span class="comment">-- valid
</span>dice_str = <span class="string">'(1d3+8^+3)x3'</span>            <span class="comment">-- valid
</span>dice_str = <span class="string">' 1d5'</span>                     <span class="comment">-- not valid (space in front of string)
</span>dice_str = <span class="string">'+10d5'</span>                     <span class="comment">-- not valid
</span>dice_str = <span class="string">'5d+5'</span>                     <span class="comment">-- not valid
</span>dice_str = <span class="string">'3d4+^1'</span>                     <span class="comment">-- not valid
</span>dice_str = <span class="string">'(1d3)x1+5'</span>                 <span class="comment">-- not valid (bonuses and rerolls have to be inside the sets parenthesis!)
</span>dice_str = <span class="string">'3d4^3'</span>                     <span class="comment">-- not valid (reroll needs a + or - sign in front of it)
</span>
</pre>

<h2>Remember!</h2>

<ul>
    <li>Error message will result if dice are incorrectly formatted.</li>
    <li>You must put a pos or neg sign in front of the bonus or reroll! (if you are going to use them)</li>
    <li>Double sign, bonus value, sets, and rerolls are optional, but number of dice and dice faces are NOT!</li>
    <li>When using dice.roll(), if dice result is 0 or neg, it will default to 1. (unless dice.minimum is set to another value)</li>
</ul>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.3</a></i>
<i style="float:right;">Last updated 2016-10-27 14:54:10 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
